\documentclass[twoside]{article}

\usepackage{polski}
\usepackage[utf8]{inputenc}

\usepackage[sc]{mathpazo} % Use the Palatino font
\usepackage[T1]{fontenc} % Use 8-bit encoding that has 256 glyphs
\linespread{1.05} % Line spacing - Palatino needs more space between lines
\usepackage{microtype} % Slightly tweak font spacing for aesthetics

\usepackage[hmarginratio=1:1,top=32mm,columnsep=20pt]{geometry} % Document margins
\usepackage{multicol} % Used for the two-column layout of the document
\usepackage[hang, small,labelfont=bf,up,textfont=it,up]{caption} % Custom captions under/above floats in tables or figures
\usepackage{booktabs} % Horizontal rules in tables
\usepackage{float} % Required for tables and figures in the multi-column environment - they need to be placed in specific locations with the [H] (e.g. \begin{table}[H])
\usepackage{hyperref} % For hyperlinks in the PDF

\usepackage{lettrine} % The lettrine is the first enlarged letter at the beginning of the text
\usepackage{paralist} % Used for the compactitem environment which makes bullet points with less space between them

\usepackage{abstract} % Allows abstract customization
\renewcommand{\abstractnamefont}{\normalfont\bfseries} % Set the "Abstract" text to bold
\renewcommand{\abstracttextfont}{\normalfont\small\itshape} % Set the abstract itself to small italic text

\usepackage{titlesec} % Allows customization of titles
\renewcommand\thesection{\Roman{section}} % Roman numerals for the sections
\renewcommand\thesubsection{\Roman{subsection}} % Roman numerals for subsections
\titleformat{\section}[block]{\large\scshape\centering}{\thesection.}{1em}{} % Change the look of the section titles
\titleformat{\subsection}[block]{\large}{\thesubsection.}{1em}{} % Change the look of the section titles

\usepackage{fancyhdr} % Headers and footers
\pagestyle{fancy} % All pages have headers and footers
\fancyhead{} % Blank out the default header
\fancyfoot{} % Blank out the default footer
\fancyhead[C]{Notyfikacje w systemie Android $\bullet$ Czerwiec 2014} % Custom header text
\fancyfoot[RO,LE]{\thepage} % Custom footer text

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\title{\vspace{-15mm}\fontsize{24pt}{10pt}\selectfont\textbf{Analiza metod notyfikacji zdarzeń z uwzględnieniem specyfiki systemów mobilnych}} % Article title

\author{
\large
\textsc{Mikołaj Jakubowski, Tomasz Godzik}\\[2mm] % Your name
\normalsize Akademia Górniczo-Hutnicza \\ % Your institution
\normalsize
\vspace{-5mm}
}
\date{}

%----------------------------------------------------------------------------------------

\begin{document}

\maketitle % Insert title

\thispagestyle{fancy} % All pages have headers and footers

%----------------------------------------------------------------------------------------
%	ABSTRACT
%----------------------------------------------------------------------------------------

%\begin{abstract}

%\noindent 

%\end{abstract}

%----------------------------------------------------------------------------------------
%	ARTICLE CONTENTS
%----------------------------------------------------------------------------------------

\begin{multicols}{2}

\section{Wstęp}

\lettrine[nindent=0em,lines=3]{Z} adaniem jest analiza literaturowa oraz testy wybranych metod notyfikacji zdarzeń występujących w środowiskach gridowych i sieciach telemetrycznych. Analiza powinna uwzględniać między innymi protokoły takie jak CoAP, XMPP, MQTT itp. oraz możliwość otrzymywania notyfikacji na urządzenia mobilne.
%------------------------------------------------

\section{Platforma testowa i założenia}
Ze względu na dużą dostępność i otwartość rozwiązania jako platformę mobilą został wybrany system Android od firmy Google. Protokoły które zostały wybrane musiały posiadać implementację na tym systemie oraz spełniać następujące założenia:
\begin{compactitem}
\item dostarczenie wiadomości musi być gwarantowane
\item opóźnienie w czasie dostarczania wiadomości musi być regulowane
\item wiadomość musi mieć możliwość przeniesienia większej ilości danych niż tylko sam fakt jej wysłania i krótka notka tekstowa
\item koszt eksploatacji musi być niski
\item treść wiadomości nie jest możliwa do podsłuchania
\end{compactitem}

\section{Systemy notyfikacji dostępne na platformie Android}

Analiza rozwiązań dostępnych na rynku doprowadziła do następującej listy:
\begin{compactitem}
\item XMPP - Extensible Messaging and Presence Protocol
\item MQTT - Message Queuing Telemetry Transport 
\item CoAP - Constrained Application Protocol
\item GCM - Google Cloud Messaging
\item SMS - Short Message Service
\item AMQP - Advanced Message Queuing Protocol
\item Restful HTTP
\end{compactitem}

\section{Odrzucone systemy notyfikacji}
Niektóre ze znalezionych rozwiązań nie spełniły założeń projektu i zostały odrzucone.
\subsubsection{SMS}
Pisanie aplikacji na system Android, która przechwytywałaby wiadomości przychodzące na urządznie i je analizowała pod kontem przesyłanej treści nie wydaje się rozsądna. Można po prostu wysłać użytkownikowi wiadomość SMS informując go o zajściu zdarzenia, lecz jest to rozwiązanie kosztowne i z tego powodu zostało odrzucone.

\subsubsection{GCM}
Google starając się ułatwić pracę programistom i starając się dbać o długość działania urządzeń na baterii zaimplementował prosty system notyfikacji na platformę Android, który utrzymuje tylko jedno otwarte połączenie. Dla zwykłych aplikacji jest to bardzo wygodne, jednak w przypadku tego projektu nie spełnia wszystkich założeń. Pierwszym problemem jaki napotykamy to ilość możliwych wiadomości do przesłania, która jest ograniczona do 4 w jednym momencie. Gdy połączymy to z brakiem gwarancji dostarczenia wiadomości oraz brakiem maksymalnego gwarantowanego opóźnienia okazuje się że przesyłanie wiadomości przez GCM nie nadaje się w naszym przypadku.

\subsubsection{Restful HTTP}
Rozwiązanie to miałoby się opierać o implmentację serwisu na urządzeniu, którym co określony okres czasu wysyłałby zapytanie do serwera o nowe wiadomości. Problemem w tym przypadku jest odstęp czasu co jaki serwis miałby wysyłać zapytanie. W przypadku 15 min mogłoby to oznaczać bardzo dużą ilość zgromadzonych w kolejce wiadomości oraz utratę znaczenia tych najstarszych. Gdyby skrócić ten okres, mogłoby się okazać, że taki serwis byłby tak prądożerny, że korzystanie z urządzenia byłoby utrudnione.

%------------------------------------------------

\section{XMPP}
XMPP to protokuł zorientowany w celu przesyłania wiadomości w formacie XML. Został zaprojektowany tak, żeby być jak najbardziej rozszerzalnym, a jednym z jego możliwych zastosowań to systemu typu publish-subscribe. Wśród wybranych rozwiązań jest to najbardziej dojrzały standard, gdyż był stosowany już o 1999. Wczasie swojej historii używały go takie firmy jak Jabber czy Google do swojego komunikatora Google Talk lub Microsoft w Skype.
\\ Struktura sieci XMPP jest podobna do e-mail, gdzie mamy rozproszoną strukturę serwerów i każdy może stworzyć swój własny serwis. Standard posiada wsparcie dla szyfrowania wiadomości, a wsparcie dla XML powoduje, że można wykorzystać w nim takie technologie jak SOAP czy EDI.
\\ Do testów protokołu na platformie Android użyliśmy implementacji XMPP o nazwie Smack.

\section{MQTT}
MQTT to protokuł do komunikacji publish-subscribe opraty na TCP/IP. Jego twórcy twierdzą, że został stworzony aby umożliwić komunikację przy ograniczonej przepustowości łącza, pisząc mało kodu oraz zużywając mało energii. Cały protokuł oparty jest o centralnego brokera, który rozsyła wiadomości publikowane na jakiś temat do wszystkich zainteresowanych czytelników. Standard został opracowany przez IBM i to właśnie z implementacji tej firmy korzystaliśmy w czasie opracowywania tego projektu.
\\ MQTT używany był już wiele razy na systemie Android. Pierwsza implemetacja GCM, czyli C2D była oparta o właśnie ten protokuł, a Facebook do tej pory korzysta z niego do wysyłania notyfikacji w swojej aplikacji.

\section{CoAP}
CoAP to protokuł, którego zadaniem ma być umożliwienie porozumiewanie się małych urządzeń takich jak sensory, switche, itp. Został zaprojektowany w oparciu o HTTP w celu uproszenia architektury i wsparcia dla multicastu. Wiadomości są przesyłane w formacie binarnym, a ich rozmiar jest ograniczony przez maksymalna długość datagramu. Standard jest stosunkowo nowy, nie posiada jeszcze swojego RFC, a ilość implementacji jest ograniczona.
\\Do testów tego protokołu wykorzystaliśmy implementację o nazwie jCoAP.

\section{AMQP}
AMQP to protokuł przesyłający dane w formacie binarnym, zaprojektowany w celu obsługi jak największej ilości możliwych zastosowań. Posiada możliwość wyboru gwarancji dostarczenia widomości (at-most-once, at-least-once lub exactly-once) oraz zapawnia interfejs do szyfrowania wiadomości.
\\ AMQP jako standard posiada wiele implementacji. Jedną z wersji opartych na Javie jest RabbitMQ, który został wybrany w celu testów tego protokołu.

\section{Testy}

\section{Wyniki}
\begin{table}[H]
\caption{Example table}
\centering
\begin{tabular}{llr}
\toprule
\multicolumn{2}{c}{Name} \\
\cmidrule(r){1-2}
First name & Last Name & Grade \\
\midrule
John & Doe & $7.5$ \\
Richard & Miles & $2$ \\
\bottomrule
\end{tabular}
\end{table}

%----------------------------------------------------------------------------------------
%	REFERENCE LIST
%----------------------------------------------------------------------------------------

\begin{thebibliography}{99}

\bibitem[Android Developer Central - GCM Advanced Topics]{}
http://developer.android.com/google/gcm/adv.html

\bibitem[XMPP]{}
http://xmpp.org/

\bibitem[AMQP]{}
http://www.amqp.org/

\bibitem[RabbitMQ]{}
http://www.rabbitmq.com/

\bibitem[MQTT]{}
http://mqtt.org/

\bibitem[Tokudu - How to Implement Push Notifications for Android]{}
http://tokudu.com/post/50024574938/how-to-implement-push-notifications-for-android

\bibitem[ServerDensity - Android push notifications]{}
https://blog.serverdensity.com/android-push-notifications-tutorial/

\end{thebibliography}

%----------------------------------------------------------------------------------------

\end{multicols}

\end{document}
